# تقرير الفحص الشامل لواجهة تطبيق بيت الريف
### التاريخ: 6 فبراير 2026
### النطاق: فحص كامل لكل زر، أيقونة، رابط، ومكوّن في الواجهة

---

## ملخص تنفيذي

تم فحص **87+ ملف مكوّن** و **15+ شاشة رئيسية** و **كامل الخادم الخلفي**. النتيجة: التطبيق يعمل بشكل عام لكن يحتوي على **4 مشاكل حرجة** قد تتسبب بتعطّل أو تجربة مكسورة، و**10 مشاكل عالية الأولوية**، و**8 متوسطة**، و**6 منخفضة**.

| المستوى | العدد | التأثير |
|---------|-------|---------|
| حرج P0 | 4 | تعطّل فوري أو تنقل مكسور |
| عالي P1 | 10 | وظائف لا تعمل أو كود ميت كبير |
| متوسط P2 | 8 | تجربة غير مكتملة |
| منخفض P3 | 6 | تحسينات وتنظيف |

---

## P0 - حرج (يجب إصلاحه فوراً)

### 1. `NotificationsCenter` غير مستورد في `BrowserLayout.tsx` - تعطّل مباشر
- **الملف**: `/components/layout/BrowserLayout.tsx` سطر 68
- **المشكلة**: المكوّن `NotificationsCenter` مُستخدم لعرض الإشعارات لكن **لم يتم استيراده** (import) في أعلى الملف.
- **التأثير**: عند ضغط المستخدم على أيقونة الجرس ← اختيار فئة ← **تعطّل كامل للتطبيق** (ReferenceError: NotificationsCenter is not defined)
- **الإصلاح**: إضافة سطر الاستيراد:
  ```tsx
  import { NotificationsCenter } from '../mobile/NotificationsCenter';
  ```

### 2. روابط بدون وجهة في القائمة الجانبية `SideDrawer`
- **الملف**: `/data/sectionsTree.ts`
- **المشكلة**: شجرة الأقسام تحتوي على 3 أقسام لا يوجد لها Route في `App.tsx`:
  | القسم | المسار | حالة Route |
  |-------|--------|-----------|
  | قسم التصميم | `/design` | غير موجود |
  | مكتبة 3D | `/3d-library` | غير موجود |
  | محرك البحث الذكي | `/search` | غير موجود |
- **التأثير**: عند ضغط المستخدم على أي من هذه الأقسام، يتم إعادته للرئيسية بصمت (بسبب `<Route path="*" />`) دون أي رسالة خطأ — تجربة مربكة.
- **الإصلاح**: إما إزالة هذه الأقسام من `sectionsTree.ts`، أو إضافة Routes لها مع صفحات "قيد الإنشاء".

### 3. عدم تطابق معرّفات الخدمات بين شاشتين مختلفتين
- **الملفات**: `/components/mobile/ServicesContent.tsx` و `/data/sectionsTree.ts`
- **المشكلة**: معرّفات الخدمات مختلفة بين الملفين:
  | ServicesContent.tsx | sectionsTree.ts |
  |---------------------|-----------------|
  | `constructionContracting` | `construction-contracting` |
  | `engineeringConsultation` | `engineering-consultation` |
  | `buildingMaterials` | `building-materials` |
  | `furnitureDecor` | `furniture-stores` |
  | `equipmentRental` | `equipment-rental` |
- **التأثير**: الضغط على خدمة من شاشة الخدمات يُنتج مسار مثل `/services/constructionContracting`، بينما القائمة الجانبية تُنتج `/services/construction-contracting` — **مساران مختلفان لنفس الخدمة**. قد يؤدي لعدم تحميل صفحة الخدمة الصحيحة.
- **الإصلاح**: توحيد المعرّفات في ملف واحد واستيراده من الجهتين.

### 4. `toast` مستورد بطريقتين مختلفتين — خطر تعارض الإصدارات
- **المشكلة**: 13 ملف يستخدم `import { toast } from 'sonner'` و 5 ملفات تستخدم `import { toast } from 'sonner@2.0.3'`.
- **التأثير المحتمل**: تحميل نسختين من المكتبة، مما قد يسبب تعارض في عرض الإشعارات أو زيادة حجم الحزمة.
- **الملفات التي تستخدم الإصدار المحدد** (`sonner@2.0.3`):
  - ProfileScreen.tsx، WalletScreen.tsx، AuthScreen.tsx، StoreHome.tsx، ProductDetails.tsx
- **الإصلاح**: توحيد الاستيراد إلى `import { toast } from 'sonner@2.0.3'` في جميع الملفات.

---

## P1 - عالي (يؤثر على جودة التطبيق)

### 5. كود ميت: `handleBottomNavChange` في 10 ملفات مكوّن
- **المشكلة**: دالة `handleBottomNavChange` معرّفة لكنها **غير مستخدمة** في أي مكان بعد حذف `BottomNav`:
  ```
  SearchScreen.tsx          (سطر 76)
  ProjectsScreen.tsx        (سطر 103)
  ServiceDetailCleaning.tsx (سطر 58)
  ServiceDetailConstructionContracting.tsx (سطر 53)
  ServiceDetailEngineeringConsultation.tsx (سطر 53)
  ServiceDetailMaintenance.tsx (سطر 48)
  ServiceDetailCraftsmen.tsx (سطر 48)
  ServiceDetailWorkshops.tsx (سطر 48)
  ServiceDetailEquipmentRental.tsx (سطر 49)
  ServiceDetailBuildingMaterials.tsx (سطر 49)
  ServiceDetailFurnitureDecor.tsx (سطر 49)
  ```
- **الإصلاح**: حذف الدالة من جميع الملفات (بحث واستبدال جماعي).

### 6. ملفات كود ميت كاملة يمكن حذفها بأمان
| الملف | السبب |
|-------|-------|
| `/components/mobile/tools/SmartMarketingTools.tsx` | لا يُستورد من أي ملف نشط |
| `/components/mobile/tools/SmartGenericTools.tsx` | لا يُستورد من أي ملف نشط |
| `/components/mobile/HomeScreen.tsx` | تم استبداله بـ `NewHomeContent.tsx` — لا يُستورد |
| `/components/WeyaakBubble.tsx` | لا يُستورد إلا من `NewApp.tsx` و `NavigationDemo.tsx` (ملفات ميتة) |
| `/components/mobile/SocialAccountsManager.tsx` | يُستورد فقط من `SmartMarketingTools.tsx` (ميت) |
| `/components/mobile/ShopScreenNew.tsx` | لا يُستورد من أي مكان |
| `/components/mobile/ShopScreenTranslated.tsx` | لا يُستورد من أي مكان |
| `/NewApp.tsx` | ملف دخول قديم — لا يُستخدم |
| `/NavigationDemo.tsx` | ملف تجريبي — لا يُستخدم |
| `/DesignSystem.tsx` | ملف عرض — لا يُستخدم (نسخة أخرى في الأرشيف) |
| `/LoginApp.tsx` | مجرد غلاف رقيق لـ `AuthScreen` (سطر واحد) — يمكن دمجه |

**الإجمالي**: ~11 ملف كود ميت

### 7. عدد الإشعارات مكتوب يدوياً (28) في TopNav
- **الملف**: `/components/mobile/TopNav.tsx` سطر 148-149
- **المشكلة**: الرقم `28` مكتوب يدوياً وليس محسوباً من مصدر بيانات حقيقي.
- **التأثير**: المستخدم يرى دائماً "28 إشعار" بصرف النظر عن الواقع.

### 8. شاشات كاملة بدون دعم اللغة الإنجليزية
| الشاشة | نسبة النصوص العربية الثابتة |
|--------|---------------------------|
| `WalletScreen.tsx` | 100% عربي |
| `RFQScreen.tsx` | 100% عربي |
| `RecommendationsScreen.tsx` | 100% عربي (بيانات + عناصر) |
| `WayakScreen.tsx` | 90%+ عربي |
| `ProfileScreen.tsx` — أقسام التعديل/الإعدادات/الطلبات/الدعم | 95%+ عربي |
| `ProjectDetail.tsx` | غالباً عربي |

### 9. أزرار وروابط لا تعمل (Dead Buttons)
| الشاشة | الزر/الرابط | السلوك الحالي |
|--------|-------------|---------------|
| `NewHomeContent.tsx` | "عرض الكل" (أفضل المزودين) سطر 411 | لا يحدث شيء |
| `NewHomeContent.tsx` | "احجز الآن" (عروض خاصة) سطر 475 | لا يحدث شيء |
| `NewHomeContent.tsx` | كروت الفئات المميزة (6 كروت) | لا يحدث شيء عند الضغط |
| `HomeScreen.tsx` | "اطلب الآن" في البنر | لا يحدث شيء |
| `HomeScreen.tsx` | "المزيد" بجانب الخدمات | لا يحدث شيء |
| `HomeScreen.tsx` | "عرض الكل" بجانب الشركات | لا يحدث شيء |
| `HomeScreen.tsx` | الإجراءات السريعة (طلب عرض سعر، استشارة AI) | لا يحدث شيء |
| `ServicesContent.tsx` | أزرار الفلتر (الموصى، العروض، قريب مني...) | تغيّر الحالة المحلية فقط، لا تؤثر على البيانات |

### 10. لا يوجد Backend للطلبات — بيانات وهمية فقط
- **الملف**: `/components/mobile/ProfileScreen.tsx` سطر 346-357
- **المشكلة**: الطلبات (Orders) في شاشة الملف الشخصي بيانات مكتوبة يدوياً (mock) بدون أي ربط بالسيرفر.
- **التأثير**: المستخدم لا يمكنه تتبع طلباته الحقيقية.

### 11. `ToolsScreen` غلاف فارغ غير ضروري
- **الملف**: `/components/mobile/ToolsScreen.tsx`
- **المشكلة**: الملف كامل عبارة عن سطر واحد يعيد `AIToolsDashboard`.
- **الإصلاح**: استيراد `AIToolsDashboard` مباشرة في `App.tsx` بدلاً من المرور عبر غلاف.

### 12. `MapsScreen` يستقبل props لا يستخدمها
- **الملف**: `/App.tsx` سطر 115
  ```tsx
  <MapsScreen onMenuClick={() => {}} activeTab="maps" onTabChange={() => {}} />
  ```
- **المشكلة**: 3 props وهمية (`onMenuClick`, `activeTab`, `onTabChange`) — بقايا من النظام القديم.

### 13. طلبات RFQ لا تُحفظ في السيرفر
- **الملف**: `/components/mobile/RFQScreen.tsx`
- **المشكلة**: `handleSubmit` لا يُرسل أي بيانات — يغيّر الحالة المحلية فقط إلى "نجح" أو "اشتراك".
- **التأثير**: طلبات عروض الأسعار تُفقد فور إغلاق الصفحة.

### 14. المحفظة: الشحن يتم مباشرة بدون بوابة دفع
- **الملف**: `/components/mobile/WalletScreen.tsx`
- **المشكلة**: ضغط "شراء" يشحن الكوينز مباشرة بدون أي عملية دفع حقيقية.
- **ملاحظة**: هناك تنبيه أسفل الصفحة يُعلم المستخدم، لكن الزر لا يزال يعمل — يجب تعطيله أو إظهار رسالة "قريباً" بدلاً من الشحن الفعلي.

---

## P2 - متوسط (تحسينات مهمة)

### 15. حقوق النشر: السنة 2025 بدلاً من 2026
- **الملفات المتأثرة**:
  - `/components/mobile/SideDrawer.tsx` سطر 323: `© 2025`
  - `/components/seo/FooterDirectory.tsx` سطر 257: `© 2025`
- **الإصلاح**: تغيير إلى `© 2026` أو استخدام `new Date().getFullYear()` ديناميكياً.

### 16. تواريخ منتهية في شاشة العروض
- **الملف**: `/components/mobile/OffersScreen.tsx` سطر 15
- **المشكلة**: عرض "خصم 30% على الدهانات" صالح حتى "31 ديسمبر 2025" — **منتهي**.

### 17. القائمة المنسدلة للإشعارات لا تُغلق عند الضغط خارجها
- **الملف**: `/components/mobile/TopNav.tsx` سطر 154-179
- **المشكلة**: لا يوجد `useClickOutside` أو معالج لإغلاق القائمة عند الضغط في أي مكان آخر.

### 18. تكرار أنماط `fontFamily` في جميع المكوّنات
- **المشكلة**: `style={{ fontFamily: 'Cairo, sans-serif' }}` مكرر في مئات الأماكن بدلاً من استخدام Tailwind class مشترك.
- **الإصلاح**: إضافة `font-cairo` في `globals.css` واستخدامه في Tailwind.

### 19. غرف الصوت (Voice Rooms) عناصر وهمية
- **الملف**: `/components/mobile/NewHomeContent.tsx` سطور 296-363
- **المشكلة**: الغرف تعرض بيانات وهمية ("+12 مشارك") وعند الضغط تعرض فقط toast. لا يوجد أي خدمة صوتية حقيقية.

### 20. `PlatformShowcase` يعرض ميزات غير مبنية فعلياً
- **التأثير**: المستخدم يرى قائمة مميزات (AI Video Creator، إدارة مشاريع، مركز مالي...) لكن معظمها غير متاح.

### 21. خريطة Google Maps معطّلة — عنصر نائب فقط
- **الملف**: `/components/mobile/MapsScreen.tsx`
- **المشكلة**: لا يتم تحميل خريطة فعلية — يعرض رسالة "البحث في الخريطة غير مفعل حالياً".

### 22. مكوّن `LanguageSwitcher` في TopNav قد يكون صغيراً جداً على الموبايل
- **الملف**: `/components/mobile/TopNav.tsx` سطر 112
- **المشكلة**: `transform scale-90` يصغّره أكثر — قد يصعب الضغط عليه.

---

## P3 - منخفض (تنظيف وتحسين)

### 23. لا توجد صفحة 404 حقيقية
- **الملف**: `/App.tsx` سطر 125
- **المشكلة**: `<Route path="*" element={<Navigate to="/home" replace />} />` يعيد التوجيه بصمت.
- **الإصلاح**: إضافة صفحة 404 مع رسالة واضحة ورابط للرئيسية.

### 24. ملفات توثيق كثيرة في الجذر (25+ ملف .md)
- **المشكلة**: الجذر يحتوي على أكثر من 25 ملف Markdown — يصعب التنقل.
- **الإصلاح**: نقلها إلى مجلد `/docs/`.

### 25. مجلد `_archive` يحتوي على ملفات قديمة كثيرة
- **المشكلة**: ~25 ملف في `/_archive/` — ثقل على المشروع.
- **الإصلاح**: التأكد من عدم استيراد أي منها ثم حذفها.

### 26. دعم البريد الإلكتروني وهمي
- **الملف**: `/components/mobile/ProfileScreen.tsx` سطر 429
- **المشكلة**: `support@bietalreef.com` ورقم الهاتف `+971 XX XXX XXXX` — بيانات وهمية.

### 27. `onFullscreenToggle` يُمرّر كدالة فارغة
- **الملف**: `/App.tsx` سطر 108
  ```tsx
  <ToolsScreen onFullscreenToggle={() => {}} />
  ```

### 28. بعض الأيقونات مستوردة ولا تُستخدم
- عدة ملفات تستورد أيقونات من `lucide-react` لا تُستخدم فعلياً في JSX (مثل `Search` في `HomeScreen.tsx`).

---

## خريطة الأزرار والتفاعلات — حسب الشاشة

### الرئيسية (`NewHomeContent.tsx`)
| العنصر | النوع | يعمل؟ | ملاحظات |
|--------|-------|-------|---------|
| Hero Carousel أسهم التنقل | زر | نعم | يعمل |
| Hero Carousel مؤشرات النقاط | زر | نعم | يعمل |
| زر CTA في Hero | زر | جزئي | يعرض toast فقط |
| طلب عرض سعر | زر | جزئي | يعرض toast فقط |
| اتصل بخبير | زر | جزئي | يعرض toast فقط |
| ارفع صوراً | زر | جزئي | يعرض toast فقط |
| كروت الفئات (6) | بطاقة | لا | لا يحدث شيء |
| "عرض الكل" المزودين | زر | لا | لا يحدث شيء |
| "تواصل الآن" المزودين | زر | جزئي | يعرض toast فقط |
| "احجز الآن" العروض | زر | لا | لا يحدث شيء |
| غرف الصوت | بطاقة | جزئي | toast فقط |
| Platform Showcase Banner | زر | نعم | ينتقل إلى `/platform` |

### شريط التنقل العلوي (`TopNav.tsx`)
| العنصر | النوع | يعمل؟ | ملاحظات |
|--------|-------|-------|---------|
| أيقونة القائمة (Menu) | زر | نعم | يفتح SideDrawer |
| الشعار | صورة | نعم | عرض فقط |
| شريط البحث | زر | نعم | يفتح FullSearchScreen |
| أيقونة الميكروفون | أيقونة | لا | ديكور فقط |
| ودجت المحفظة | زر | نعم | ينتقل إلى `/wallet` |
| مبدّل اللغة | زر | نعم | يعمل |
| أيقونة السلة | زر | نعم | يظهر فقط في المتجر |
| أيقونة الجرس | زر | جزئي | القائمة المنسدلة تعمل لكن لا تُغلق بالضغط خارجها |
| اختيار فئة إشعار | زر | خطأ | يتعطل (NotificationsCenter غير مستورد) |

### القائمة الجانبية (`SideDrawer.tsx`)
| العنصر | النوع | يعمل؟ | ملاحظات |
|--------|-------|-------|---------|
| الملف الشخصي | بطاقة | نعم | ينتقل للملف |
| الرئيسية | زر | نعم | ✓ |
| الخدمات → overlay | زر | نعم | يفتح شبكة فرعية |
| أقسام الخدمات الفرعية | زر | نعم | ✓ |
| المتجر | زر | نعم | ✓ |
| محفظة ريف | زر | نعم | ✓ |
| الخرائط | زر | نعم | ينتقل لكن الخريطة معطلة |
| الأدوات | زر | نعم | ✓ |
| **قسم التصميم** | زر | **لا** | **لا يوجد Route** |
| وياك AI | زر | نعم | ✓ |
| **مكتبة 3D** | زر | **لا** | **لا يوجد Route** |
| الملف الشخصي | زر | نعم | ✓ |
| **محرك البحث الذكي** | زر | **لا** | **لا يوجد Route** |
| تسجيل الخروج | زر | نعم | ✓ |

### صفحة الأدوات (`AIToolsDashboard.tsx`)
| العنصر | النوع | يعمل؟ | ملاحظات |
|--------|-------|-------|---------|
| حاسبة مواد البناء | زر | نعم | ✓ يعمل |
| حاسبة الدهانات | زر | نعم | ✓ يعمل |
| مقدّر تكلفة البناء | زر | نعم | ✓ يعمل |
| مولّد عروض الأسعار | زر | نعم | ✓ يعمل |
| مولّد الفواتير | زر | نعم | ✓ يعمل |
| مولّد العقود | زر | نعم | ✓ يعمل |
| مولّد المحتوى التسويقي | زر | نعم | ✓ يعمل |
| مدير السوشيال ميديا | زر | نعم | ✓ يعمل |
| استوديو التصميم | زر | نعم | ✓ ينتقل |
| أدوات البناء المتقدمة | زر | نعم | ✓ ينتقل |

### صفحة الملف الشخصي (`ProfileScreen.tsx`)
| العنصر | النوع | يعمل؟ | ملاحظات |
|--------|-------|-------|---------|
| صورة الملف + الكاميرا | زر | نعم | رفع الصورة يعمل |
| تعديل الملف | زر | نعم | يحفظ الاسم فقط (الهاتف لا يُحفظ) |
| تحديد الموقع | زر | جزئي | الواجهة تعمل لكن API الخرائط قد لا يعمل |
| طلباتي | زر | نعم | لكن بيانات وهمية |
| الاشتراكات | زر | نعم | يعرض الباقات |
| الإعدادات | زر | نعم | التبديلات محلية فقط (لا تُحفظ) |
| الدعم الفني | زر | نعم | بيانات اتصال وهمية |
| من نحن | زر | نعم | ✓ |
| الشروط والأحكام | زر | نعم | ✓ |
| تسجيل الخروج | زر | نعم | ✓ يعمل |
| المحفظة | زر | نعم | ✓ ينتقل |
| تغيير كلمة المرور | زر | لا | يعرض "قريباً" |
| حذف الحساب | زر | لا | يعرض "غير متاح" |

---

## توصيات خطة التطوير — مرتبة بالأولوية

### المرحلة 1 (أسبوع 1) — إصلاح الأعطال
1. إضافة import `NotificationsCenter` في `BrowserLayout.tsx`
2. إزالة أو إضافة Routes للأقسام المفقودة (design, 3d-library, search)
3. توحيد معرّفات الخدمات
4. توحيد استيراد `sonner@2.0.3`
5. تحديث سنة حقوق النشر إلى 2026

### المرحلة 2 (أسبوع 2) — تنظيف الكود الميت
6. حذف `handleBottomNavChange` من 10 ملفات
7. حذف الملفات الميتة (SmartMarketingTools, SmartGenericTools, HomeScreen, WeyaakBubble, SocialAccountsManager, ShopScreenNew, ShopScreenTranslated, NewApp, NavigationDemo, DesignSystem)
8. تبسيط ToolsScreen أو إزالته
9. تنظيف props الوهمية من MapsScreen

### المرحلة 3 (أسبوع 3-4) — اكتمال وظيفي
10. إضافة اللغة الإنجليزية للشاشات المتبقية (Wallet, RFQ, Recommendations, Wayak, Profile sub-sections)
11. ربط أزرار NewHomeContent بوجهات حقيقية (الفئات → صفحة الخدمة، عرض الكل → صفحة المزودين)
12. إنشاء backend للطلبات وRFQ
13. جعل عدد الإشعارات ديناميكي
14. إضافة click-outside لإغلاق dropdown الإشعارات

### المرحلة 4 (أسبوع 5+) — تحسين التجربة
15. بناء صفحة 404 مخصصة
16. تفعيل خرائط Google Maps
17. ربط بوابة دفع حقيقية للمحفظة
18. بناء وظائف غرف الصوت أو إزالتها
19. مراجعة شاملة لـ Accessibility (a11y)
20. تحسين الأداء (lazy loading للشاشات الثانوية)

---

## إحصائيات الفحص

| المقياس | القيمة |
|---------|--------|
| إجمالي الملفات المفحوصة | 87+ |
| ملفات كود ميت قابلة للحذف | 11 |
| أزرار لا تعمل | 12+ |
| شاشات بدون دعم إنجليزي | 6 |
| Routes بدون وجهة | 3 |
| دوال غير مستخدمة | 10+ |
| ملفات .md في الجذر (فوضى) | 25+ |

---

*تم إعداد هذا التقرير بتاريخ 6 فبراير 2026 بناءً على فحص شامل لكل مكوّن وزر وأيقونة في تطبيق بيت الريف.*
